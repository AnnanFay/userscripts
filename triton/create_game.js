var defaultConfig = {
  "name": "",
  "description": "",
  "password": "123",
  "players": "8",
  "playerType": "0",
  "alliances": "0",
  "anonymity": "0",
  "starsForVictory": "50",
  "buildGates": "1",
  "randomGates": "0",
  "darkGalaxy": "2",
  "starsPerPlayer": "24",
  "homeStarDistance": "3",
  "naturalResources": "2",
  "starfield": "hexgrid",
  "starScatter": "random",
  "customStarfield": "",
  "productionTicks": "24",

  "startingStars": "6",
  "startingCash": "500",
  "startingShips": "10",
  "startingInfEconomy": "5",
  "startingInfIndustry": "5",
  "startingInfScience": "1",
  "developmentCostEconomy": "2",
  "developmentCostIndustry": "2",
  "developmentCostScience": "2",

  "startingTechTerraforming": "1",
  "startingTechExperimentation": "1",
  "startingTechScanning": "1",
  "startingTechHyperspace": "1",
  "startingTechManufacturing": "1",
  "startingTechBanking": "1",
  "startingTechWeapons": "1",

  "researchCostTerraforming": "2",
  "researchCostExperimentation": "2",
  "researchCostScanning": "2",
  "researchCostHyperspace": "2",
  "researchCostManufacturing": "2",
  "researchCostBanking": "2",
  "researchCostWeapons": "2",

  "tradeCost": "15",
  "tradeScanned": "0",
  "turnBased": "0",
  "tickRate": "60",
  "turnJumpTicks": "8",
  "turnTime": "24"
};
var favouriteConfig = {
  "name": "",
  "description": "",
  "password": "123",
  "players": "16",
  "playerType": "0",
  "alliances": "1",
  "anonymity": "1",
  "starsForVictory": "33",
  "buildGates": "2",
  "randomGates": "2",
  "darkGalaxy": "1",
  "starsPerPlayer": "24",
  "homeStarDistance": "3",
  "naturalResources": "2",
  "starfield": "custom",
  "starScatter": "random",
  "customStarfield": "",
  "productionTicks": "18",

  "tradeCost": "15",
  "tradeScanned": "1",
  "turnBased": "1",
  "tickRate": "60",
  "turnJumpTicks": "12",
  "turnTime": "24",

  "startingStars": "3",
  "startingCash": "2000",
  "startingShips": "10",
  "startingInfEconomy": "0",
  "startingInfIndustry": "0",
  "startingInfScience": "0",
  "developmentCostEconomy": "2",
  "developmentCostIndustry": "2",
  "developmentCostScience": "2",

  "startingTechTerraforming": "1",
  "startingTechExperimentation": "1",
  "startingTechScanning": "2",
  "startingTechHyperspace": "1",
  "startingTechManufacturing": "1",
  "startingTechBanking": "1",
  "startingTechWeapons": "1",

  "researchCostTerraforming": "2",
  "researchCostExperimentation": "2",
  "researchCostScanning": "2",
  "researchCostHyperspace": "2",
  "researchCostManufacturing": "2",
  "researchCostBanking": "2",
  "researchCostWeapons": "2"
};
var configOkeanosTethys = {
  "researchCostExperimentation": 4,
  "darkGalaxy": 1,
  "developmentCostIndustry": 2,
  "researchCostManufacturing": 3,
  "startingTechHyperspace": 14,
  "starScatter": "random",
  "developmentCostEconomy": 2,
  "tradeCost": 15,
  "startingTechTerraforming": 1,
  // "mirror": 0,
  "anonymity": 0,
  "startingStars": 1,
  "alliances": 1,
  "researchCostWeapons": 0,
  "researchCostHyperspace": 1,
  "researchCostScanning": 1,
  "starsForVictory": 50,
  "naturalResources": 3,
  "startingTechManufacturing": 1,
  "startingTechExperimentation": 1,
  "startingCash": 1000,
  "turnTime": 24,
  "randomGates": 0,
  "startingInfEconomy": 10,
  // "non_default_settings": ["researchCostExperimentation", "darkGalaxy", "researchCostManufacturing", "startingTechHyperspace", "startingStars", "alliances", "researchCostWeapons", "researchCostHyperspace", "researchCostScanning", "naturalResources", "startingCash", "startingInfEconomy", "buildGates", "startingInfIndustry", "startingInfScience", "startingTechWeapons", "starsPerPlayer", "developmentCostScience", "turnJumpTicks", "turnBased", "players", "startingShips", "startingTechScanning"],
  "tickRate": 60,
  "buildGates": 2,
  "description": "Hear me Okeanos,<br>O blessed god and highest divine purifier,<br>The earth\u2019s own end, the pole\u2019s beginning, where the ships glide on,<br>And come, kind and ever gracious to the initiates.<br><br>O Tethys,<br>Mother of Venus, and of clouds obscure,<br>Great nurse of beasts, and source of fountains pure.<br>O venerable Goddess, hear my pray&#x27;r,<br>And make benevolent my life thy care;<br>Send, blessed queen, to ships a prosp&#x27;rous breeze,<br>And waft them safely o&#x27;er the stormy seas.",
  "startingInfIndustry": 10,
  "startingInfScience": 3,
  "homeStarDistance": 3,
  "startingTechWeapons": 7,
  "starsPerPlayer": 8,
  "startingTechBanking": 1,
  "password": "",
  "researchCostBanking": 2,
  "productionTicks": 24,
  "name": "Okeanos + Tethys (TB)",
  "developmentCostScience": 1,
  "playerType": 0,
  "tradeScanned": 0,
  // "adminUserId": 0,
  "turnJumpTicks": 24,
  "turnBased": 1,
  "researchCostTerraforming": 2,
  "players": 24,
  "startingShips": 50,
  "startingTechScanning": 3,
  "starfield": "custom",
  "customStarfield": "[[0, 0], [7.78, -7.78], [0, -15.56], [-7.78, -7.78], [0, 25], [-7.78, 32.78], [0, 40.56], [7.78, 32.78], [-17.68, 12.5], [-25.46, 4.72], [-25.46, 20.28], [-33.23, 12.5], [45.28, 21.78], [45.28, 10.78], [56.28, 10.78], [56.78, 21.78], [56.28, -14.22], [45.28, -14.22], [56.28, -25.22], [45.28, -25.22], [76.56, 3.78], [87.56, 3.78], [76.56, -7.22], [87.56, -7.22]]"
};

var reuleauxStarfield = [
                        [0, -26],
            [-11, -20], [0, -14],   [11, -20],
            [-20, -11],             [20, -11],
  [-26, 0], [-14, 0],               [14, 0],  [26, 0],
            [-20, 11],              [20, 11],
            [-11, 20], [0, 14],     [11, 20],
                       [0, 26]
];

function foPoint (a, r) {
  var rads = a * 2 * Math.PI;
  var x = r * Math.cos(rads);
  var y = r * Math.sin(rads);
  console.log('a rads x y', a, rads, x, y);
  return [x, y];
}

function circularStarfield(l, r) {
  var sf = [];
  for (var i = 0; i < l; i++) {
    sf.push(foPoint(i/l, r));
  }
  return sf;
}

function prepareStarfield (starfield, starfieldScale) {
  for (var i = 0, l = starfield.length; i < l; i++) {
    starfield[i][0] = starfield[i][0] * starfieldScale;
    starfield[i][1] = starfield[i][1] * starfieldScale;
  }

  return starfield;
}

function create_game(config, force) {
  if (!force && !config.password) return; // !!!

  var jsonGameSettings = JSON.stringify(config);
  NeptunesPride.mg.trigger("request", {
    "type": "create_game",
    "config": jsonGameSettings
  });
}

var baseConfig = favouriteConfig;//configOkeanosTethys;

baseConfig.name = 'Custom Layout Test';
baseConfig.description = 'This is a layout test only, you can join but the game will not start. Password is 123.';
baseConfig.darkGalaxy = 0;
baseConfig.password = '123';
baseConfig.starfield = 'custom';
baseConfig.startingStars = '3';

// high starfieldScale increases home distances
// low homeStarDistance increases star clustering



//scaling is (x/3)
// 2: 0.66 (close)
// 3: 1
// 4: 1.33 (far)

baseConfig.homeStarDistance = 8;
var starfieldScale = 2 * (3 / baseConfig.homeStarDistance);


var testStarfield = [[0, 0],[0, 1],[1, 1],[1, 0]];

// var starfield = prepareStarfield(reuleauxStarfield, starfieldScale);
// var starfield = prepareStarfield(faceoffStarfield, starfieldScale);
// var starfield = prepareStarfield(testStarfield, starfieldScale);

var rawStarfield = [].concat(
  circularStarfield(10, 8.2)
  // ,circularStarfield(12, 18)
);

var starfield = prepareStarfield(rawStarfield, starfieldScale);
baseConfig.customStarfield = starfield.toSource();
baseConfig.players = starfield.length;



// baseConfig.name = 'Reuleaux (TB, Dark, CL)';
// baseConfig.description = 'Turn Based, Dark galaxy, Custom Layout. Read the settings! Don\'t join unless you plan to stay. Good luck! :)';
// baseConfig.startingStars = '1';
// baseConfig.starScatter = 'random';

baseConfig.name = 'The Eye (TB, Dark, CL)';
baseConfig.description = 'Turn Based, Dark Galaxy, Symmetric Custom Layout. Read the settings! Don\'t join unless you plan to stay. Good luck! :)';
baseConfig.startingStars = '3';

baseConfig.starScatter = 'twin_ring';

baseConfig.starsPerPlayer = '32';

//baseConfig.password = '';
//baseConfig.darkGalaxy = 1;

// console.log('starfield:', starfield);
// console.log('config:', baseConfig);

// starfield.map(function(x){console.log(x)});

create_game(baseConfig);
